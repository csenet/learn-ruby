<!DOCTYPE html>
<html lang="en-US">

<head>
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>第4回 スコープ、オブジェクト指向と読みやすいコード | Ruby学習サイト</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="第4回 スコープ、オブジェクト指向と読みやすいコード" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Ruby学習サイト" />
<meta property="og:description" content="Ruby学習サイト" />
<link rel="canonical" href="https://rubylect.k1h.dev/lect4/" />
<meta property="og:url" content="https://rubylect.k1h.dev/lect4/" />
<meta property="og:site_name" content="Ruby学習サイト" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="第4回 スコープ、オブジェクト指向と読みやすいコード" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Ruby学習サイト","headline":"第4回 スコープ、オブジェクト指向と読みやすいコード","url":"https://rubylect.k1h.dev/lect4/"}</script>
<!-- End Jekyll SEO tag -->

  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link rel="preload" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700&display=swap" as="style"
    type="text/css" crossorigin>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link rel="stylesheet" href="/assets/css/style.css?v=e16c9f31818af6bf55caf043b5fb7560b306bc92">
  <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

</head>

<body>
  <a id="skip-to-content" href="#content">Skip to the content.</a>
  <header role="banner">
    <nav class="navbar navbar-light py-3" style="background-color: #e3f2fd;">
      <div class="container-fluid">
        <span
          class="navbar-brand mb-0 h1">第4回 スコープ、オブジェクト指向と読みやすいコード</span>
      </div>
    </nav>
    <!-- <h2 class="project-tagline">
      Ruby学習サイト</h2>-->
  </header>
  <main id="content" class="main-content" role="main">
    <h2 id="第4回-スコープオブジェクト指向と読みやすいコード">第4回 スコープ、オブジェクト指向と読みやすいコード</h2>

<h1 id="目次">目次</h1>

<ul id="markdown-toc">
  <li><a href="#第4回-スコープオブジェクト指向と読みやすいコード" id="markdown-toc-第4回-スコープオブジェクト指向と読みやすいコード">第4回 スコープ、オブジェクト指向と読みやすいコード</a></li>
  <li><a href="#目次" id="markdown-toc-目次">目次</a></li>
  <li><a href="#前回の復習" id="markdown-toc-前回の復習">前回の復習</a>    <ul>
      <li><a href="#複雑な制御構文" id="markdown-toc-複雑な制御構文">複雑な制御構文</a>        <ul>
          <li><a href="#case文" id="markdown-toc-case文">Case文</a></li>
          <li><a href="#while文" id="markdown-toc-while文">While文</a>            <ul>
              <li><a href="#each文" id="markdown-toc-each文">each文</a></li>
              <li><a href="#breakとnext" id="markdown-toc-breakとnext">breakとnext</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li><a href="#修飾子" id="markdown-toc-修飾子">修飾子</a></li>
      <li><a href="#再帰関数" id="markdown-toc-再帰関数">再帰関数</a></li>
    </ul>
  </li>
  <li><a href="#スコープ" id="markdown-toc-スコープ">スコープ</a>    <ul>
      <li><a href="#グローバル変数" id="markdown-toc-グローバル変数">グローバル変数</a></li>
    </ul>
  </li>
  <li><a href="#オブジェクト指向" id="markdown-toc-オブジェクト指向">オブジェクト指向</a></li>
  <li><a href="#読みやすいコード" id="markdown-toc-読みやすいコード">読みやすいコード</a>    <ul>
      <li><a href="#変数関数名" id="markdown-toc-変数関数名">変数・関数名</a></li>
      <li><a href="#関数" id="markdown-toc-関数">関数</a></li>
      <li><a href="#コメントアウト" id="markdown-toc-コメントアウト">コメントアウト</a></li>
    </ul>
  </li>
  <li><a href="#演習" id="markdown-toc-演習">演習</a>    <ul>
      <li><a href="#演習問題4a" id="markdown-toc-演習問題4a">演習問題4a</a></li>
      <li><a href="#演習問題4b" id="markdown-toc-演習問題4b">演習問題4b</a></li>
      <li><a href="#演習問題4c" id="markdown-toc-演習問題4c">演習問題4c</a></li>
      <li><a href="#以下上級者向け問題" id="markdown-toc-以下上級者向け問題">以下上級者向け問題</a></li>
      <li><a href="#演習問題4d" id="markdown-toc-演習問題4d">演習問題4d</a></li>
      <li><a href="#演習問題4e" id="markdown-toc-演習問題4e">演習問題4e</a></li>
      <li><a href="#演習問題4fジャッジはなし" id="markdown-toc-演習問題4fジャッジはなし">演習問題4f(ジャッジはなし)</a></li>
    </ul>
  </li>
</ul>

<h1 id="前回の復習">前回の復習</h1>

<p>前回は再帰関数など少し難しい内容が多く説明が足りなかった部分もあるかもしれません。</p>

<p>本当の詳しいところは、今後授業や競プロなどで興味があれば是非沼にハマっていってください。</p>

<p>この講習の目的としては、制御構文や関数を扱えるという部分なので前回の後半の内容をすべて理解していなくても大丈夫です。</p>

<h2 id="複雑な制御構文">複雑な制御構文</h2>

<h3 id="case文">Case文</h3>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">getClass</span><span class="p">(</span><span class="n">age</span><span class="p">)</span>
  <span class="k">if</span> <span class="mi">0</span><span class="o">..</span><span class="mi">2</span>
    <span class="s2">"幼児"</span>
  <span class="k">when</span> <span class="mi">3</span><span class="o">..</span><span class="mi">6</span>
    <span class="s2">"小児"</span>
  <span class="k">when</span> <span class="mi">7</span><span class="o">..</span><span class="mi">12</span>
    <span class="s2">"子供"</span>
  <span class="k">when</span> <span class="mi">13</span><span class="o">..</span><span class="mi">18</span>
    <span class="s2">"若者"</span>
  <span class="k">else</span>
    <span class="s2">"大人"</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">case A</code>としたとき<code class="language-plaintext highlighter-rouge">A</code>とwhenで指定された部分が一致する処理を行いってくれます。<code class="language-plaintext highlighter-rouge">else</code>はどの条件にも当てはまらないときに呼ばれる。</p>

<p>1つの値に対して複数の条件分岐をする場合に完結に書くことができる。</p>

<h3 id="while文">While文</h3>

<p>while文は条件を満たす間は処理を行う処理。</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">countdown</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
  <span class="k">while</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">do</span>
    <span class="nb">puts</span> <span class="n">n</span>
    <span class="n">n</span> <span class="o">=</span> <span class="n">n</span> <span class="o">-</span><span class="mi">1</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>のような処理をすると、<code class="language-plaintext highlighter-rouge">n &gt; 0</code>を満たす間は<code class="language-plaintext highlighter-rouge">n = n - 1</code>をするので、nから順にカウントダウンされていきます。</p>

<h4 id="each文">each文</h4>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">sumA</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="n">sumB</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="k">for</span> <span class="n">num</span> <span class="k">in</span> <span class="n">data</span> <span class="k">do</span>
  <span class="n">sumA</span> <span class="o">+=</span> <span class="n">num</span>
<span class="k">end</span>
<span class="n">data</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">num</span><span class="o">|</span>
  <span class="n">sumB</span> <span class="o">+=</span> <span class="n">num</span>
<span class="k">end</span>
</code></pre></div></div>

<p>のように配列から順番に要素を取り出して処理をすることが可能です。</p>

<h4 id="breakとnext">breakとnext</h4>

<p><code class="language-plaintext highlighter-rouge">break</code>はループを強制的に抜ける命令で</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mi">10</span><span class="p">.</span><span class="nf">times</span> <span class="k">do</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span>
  <span class="k">break</span> <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">5</span>
  <span class="nb">puts</span> <span class="n">i</span>
<span class="k">end</span>
</code></pre></div></div>

<p>このように、<code class="language-plaintext highlighter-rouge">i</code>が5より大きくなると<code class="language-plaintext highlighter-rouge">break</code>が呼び出されて<code class="language-plaintext highlighter-rouge">for</code>文から強制的に抜けるので、</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>0
1
2
3
4
5
</code></pre></div></div>
<p>となります。</p>

<p>また、<code class="language-plaintext highlighter-rouge">next</code>文を使うと特定の条件で処理をスキップすることもでき、</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mi">10</span><span class="p">.</span><span class="nf">times</span> <span class="k">do</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span>
  <span class="k">next</span> <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span>
  <span class="nb">puts</span> <span class="n">i</span>
<span class="k">end</span>
</code></pre></div></div>

<p>のようにすると、<code class="language-plaintext highlighter-rouge">i</code>が2の倍数のときに<code class="language-plaintext highlighter-rouge">next</code>が呼び出されて処理がスキップされます。
つまりは、</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1
3
5
7
9
</code></pre></div></div>

<p>のように奇数だけが出力されるようになります。</p>

<h2 id="修飾子">修飾子</h2>

<p><code class="language-plaintext highlighter-rouge">if</code>や<code class="language-plaintext highlighter-rouge">while</code>などの文は</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">fac</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
  <span class="k">return</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span>
  <span class="k">return</span> <span class="n">n</span> <span class="o">*</span> <span class="n">fac</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div>

<p>のように、<code class="language-plaintext highlighter-rouge">処理 if 条件</code>などのようにすると1行で書くことが可能。</p>

<h2 id="再帰関数">再帰関数</h2>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">fac</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
  <span class="k">return</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span>
  <span class="k">return</span> <span class="n">n</span> <span class="o">*</span> <span class="n">fac</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div>

<p>のようなコードが有る場合に、例えば、<code class="language-plaintext highlighter-rouge">n=3</code>を入れた時の動作を見てみると</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fac(3) =&gt; 3 * fac(2)
fac(2) =&gt; 2 * fac(1)
fac(1) =&gt; 1
</code></pre></div></div>

<p>順番に代入してみると、</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fac(3) =&gt; 3 * 2 * 1 = 6
</code></pre></div></div>

<p>となります。</p>

<p>このように関数の中で関数を呼び出すことが可能。</p>

<ul>
  <li>
    <p>再帰関数を使うと漸化式などをそもまま実装できる</p>
  </li>
  <li>
    <p>繰り返しで書くよりも完結に書ける場合もある</p>
  </li>
</ul>

<p>ただし、関数を呼び出す回数が多くなりすぎるとエラーが起きるので注意。</p>

<p>再帰関数を使いこなせると色々なアルゴリズムを実装できるが、少し複雑になるのでこの講習では省略。</p>

<p>キーワード</p>
<ul>
  <li>動的計画法(メモ化再帰)</li>
  <li>幅優先探索</li>
  <li>関数型プログラミング</li>
</ul>

<p>沼にハマりたい人は是非</p>

<h1 id="スコープ">スコープ</h1>

<p>今回の講習では基本的に関数ベースで話しをしていたため、あまり登場していなかったが補足。</p>

<p>Rubyで今まで扱ってきた変数にはいくつか種類があった。</p>

<ul>
  <li><strong>ローカル変数</strong> (今までこれを使ってた)</li>
  <li>インスタンス変数</li>
  <li>クラス変数</li>
  <li>グローバル変数</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">name</span> <span class="o">=</span> <span class="s2">"Void"</span>

<span class="k">def</span> <span class="nf">greet</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span>
  <span class="n">script</span> <span class="o">=</span>  <span class="s2">"Hello!"</span> <span class="o">+</span> <span class="nb">name</span> <span class="o">+</span> <span class="s2">"!"</span>
  <span class="nb">puts</span><span class="p">(</span><span class="n">script</span><span class="p">)</span>
<span class="k">end</span>

<span class="n">greet</span><span class="p">(</span><span class="s2">"Void"</span><span class="p">)</span>
<span class="nb">puts</span><span class="p">(</span><span class="n">script</span><span class="p">)</span>
</code></pre></div></div>

<p>これを実行すると、</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Hello!Void!
Error: eval:9:in `&lt;main&gt;': undefined local variable or method `script' for main:Object (NameError)
</code></pre></div></div>
<p>のようにエラーが発生する。</p>

<p>関数の中で定義された変数は関数のみで有効。</p>

<p>スコープは、<strong>変数の有効範囲</strong>のこと。</p>

<h2 id="グローバル変数">グローバル変数</h2>

<p>では、関数の中で定義した変数を外でも使いたい場合は？</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">name</span> <span class="o">=</span> <span class="s2">"Void"</span>

<span class="k">def</span> <span class="nf">greet</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span>
  <span class="vg">$script</span> <span class="o">=</span>  <span class="s2">"Hello!"</span> <span class="o">+</span> <span class="nb">name</span> <span class="o">+</span> <span class="s2">"!"</span>
  <span class="nb">puts</span><span class="p">(</span><span class="vg">$script</span><span class="p">)</span>
<span class="k">end</span>

<span class="n">greet</span><span class="p">(</span><span class="s2">"Void"</span><span class="p">)</span>
<span class="nb">puts</span><span class="p">(</span><span class="vg">$script</span><span class="p">)</span>
</code></pre></div></div>

<p>これだと、</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Hello!Void!
Hello!Void!
</code></pre></div></div>
<p>のように正しく表示される。</p>

<p>変数の先頭に、<code class="language-plaintext highlighter-rouge">$</code>をつけて<code class="language-plaintext highlighter-rouge">$script</code>あげると<strong>グローバル変数</strong>と呼ばれるものになる。</p>

<p><strong>グローバル変数</strong>のスコープ(有効範囲)はプログラム全体なので、どこからでも参照できる。</p>

<h1 id="オブジェクト指向">オブジェクト指向</h1>

<p>プログラミング言語にはいくつか種類がある。</p>

<ul>
  <li>手続き型言語(C言語やBASICなど)</li>
  <li>オブジェクト指向言語(<strong>Ruby</strong>やPythonなど)</li>
  <li>関数型言語(GoやHaskellなど)</li>
</ul>

<p>この中でも、<strong>Ruby</strong>はオブジェクト指向という考え方に基づいた言語になっている。</p>

<p>オブジェクト指向の重要な3つの概念は、</p>

<ul>
  <li>カプセル化(隠蔽)</li>
  <li>継承</li>
  <li>ポリモーフィズム</li>
</ul>

<p>今回は雰囲気だけ。</p>

<p>プログラムでは、クラスと呼ばれる関数やデータをまとめたものを扱います。</p>

<p>例えば、ラインをトレースするロボットを制御することを考えてみます。</p>

<p><img src="/lect4/fig/line.png" alt="Line" /></p>

<p>このロボットをパーツごとに分解してみると、大きく分けると</p>

<ul>
  <li>コントローラー</li>
  <li>センサー</li>
  <li>バッテリー</li>
  <li>モーター</li>
</ul>

<p>に分けられます。</p>

<ul>
  <li>カプセル化</li>
</ul>

<p>普通にモーターを制御する場合には、</p>

<p>モータードライバの仕様を理解した上で、それを駆動させるための信号を作成するプログラムを作らなくてはいけませんが、制御する側はそんなハードウェアのことなんて気にしたくないですよね。</p>

<p>つまりは、モーターをどっちに回すのかと速度を指定すれば勝手にモーターが回ってくれれば良いですよね。</p>

<p>あと、モータードライバを変更するたびに変更するの面倒ですよね。一回、作ったら他のロボットでも使いまわしたい。</p>

<p>このように、内部の処理を<code class="language-plaintext highlighter-rouge">ブラックボックス化</code>してあげることをカプセル化といいいます。</p>

<ul>
  <li>継承</li>
</ul>

<p>では、車を動かすためにモーターを制御するクラスを作りました。</p>

<p>車の「直進」「止まる」「曲がる」といったいったようなものを実装するときに、それぞれでまたモーターを制御する設定を書くのは面倒ですよね。</p>

<p>そこで、基本的な設計図を用意して他の必要な部分はそれぞれカスタマイズします。これが継承です。</p>

<p>では、実際にRubyでどのように実装されるのか見てみます。</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">ClassName</span>
<span class="k">def</span> <span class="nf">method_name</span><span class="p">(</span><span class="n">arg1</span><span class="p">,</span><span class="n">arg2</span><span class="p">,</span><span class="o">...</span><span class="p">)</span>
  <span class="err">処理</span>
<span class="k">end</span>

<span class="n">instance</span> <span class="o">=</span> <span class="no">ClassName</span><span class="p">.</span><span class="nf">new</span><span class="p">()</span>
<span class="n">instanace</span><span class="p">.</span><span class="nf">medhot_name</span><span class="p">()</span>
</code></pre></div></div>

<p>RubyではこのようにClassを定義します。</p>

<p>クラスを実行する際には、インスタンスと呼ばれる実体を生成します。</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Motor</span>
  <span class="k">def</span> <span class="nf">stop</span><span class="p">()</span>
    <span class="nb">puts</span> <span class="s2">"Stop"</span>
  <span class="k">end</span>
  <span class="k">def</span> <span class="nf">move</span><span class="p">(</span><span class="n">speed</span><span class="p">)</span>
    <span class="nb">puts</span> <span class="s2">"MOVE </span><span class="si">#{</span><span class="n">speed</span><span class="si">}</span><span class="s2">"</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">rightMotor</span> <span class="o">=</span> <span class="no">Motor</span><span class="p">.</span><span class="nf">new</span>
<span class="n">rightMotor</span><span class="p">.</span><span class="nf">move</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
<span class="n">rightMotor</span><span class="p">.</span><span class="nf">stop</span><span class="p">()</span>
</code></pre></div></div>

<p>実行すると、</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MOVE 1.0
Stop
</code></pre></div></div>

<p>サーボモータ(角度をしてできるモーター)を追加してみる。</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Motor</span>
  <span class="k">def</span> <span class="nf">stop</span><span class="p">()</span>
    <span class="nb">puts</span> <span class="s2">"Stop"</span>
  <span class="k">end</span>
  <span class="k">def</span> <span class="nf">move</span><span class="p">(</span><span class="n">speed</span><span class="p">)</span>
    <span class="nb">puts</span> <span class="s2">"MOVE </span><span class="si">#{</span><span class="n">speed</span><span class="si">}</span><span class="s2">"</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">Servo</span> <span class="o">&lt;</span> <span class="no">Motor</span>
  <span class="k">def</span> <span class="nf">moveDegree</span><span class="p">(</span><span class="n">degree</span><span class="p">)</span>
    <span class="nb">puts</span> <span class="s2">"MOVEDEG </span><span class="si">#{</span><span class="n">degree</span><span class="si">}</span><span class="s2">"</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">rightMotor</span> <span class="o">=</span> <span class="no">Servo</span><span class="p">.</span><span class="nf">new</span>
<span class="n">rightMotor</span><span class="p">.</span><span class="nf">moveDegree</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
<span class="n">rightMotor</span><span class="p">.</span><span class="nf">stop</span><span class="p">()</span>
</code></pre></div></div>

<p>これを実行すると、</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MOVEDEG 30
Stop
</code></pre></div></div>
<p>のように、Motorクラスに対して機能を追加しているような感じ。</p>

<p>オブジェクト指向は、実際にコードを試行錯誤してみると良い設計や機能をつかめるはず。</p>

<h1 id="読みやすいコード">読みやすいコード</h1>

<p>1人でコードを書いているだけならいいが、チーム開発などでは他の人が読めるコードを書くことが必要になる。特に、ぐちゃぐちゃなコードを書いてしまうと、のちのちの自分もわけがわからなくなってしまう。</p>

<h2 id="変数関数名">変数・関数名</h2>

<p>変数名を定義するときに適当な名前をつけていませんか?</p>

<p>例えば、次のようなうるう年か判定する関数があったとします。
ここでは仮に2022~2027までの5年間を判定します。</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">uruudoshi</span><span class="p">(</span><span class="n">toshi</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">toshi</span> <span class="o">==</span> <span class="mi">2022</span> <span class="k">then</span>
    <span class="k">return</span> <span class="kp">false</span>
  <span class="k">elsif</span> <span class="n">toshi</span> <span class="o">==</span> <span class="mi">2023</span> <span class="k">then</span>
    <span class="k">return</span> <span class="kp">false</span>
  <span class="k">elsif</span> <span class="n">toshi</span> <span class="o">==</span> <span class="mi">2024</span> <span class="k">then</span>
    <span class="k">return</span> <span class="kp">true</span>
  <span class="k">elsif</span> <span class="n">toshi</span> <span class="o">==</span> <span class="mi">2025</span> <span class="k">then</span>
    <span class="k">return</span> <span class="kp">false</span>
  <span class="k">elsif</span> <span class="n">toshi</span> <span class="o">==</span> <span class="mi">2026</span> <span class="k">then</span>
    <span class="k">return</span> <span class="kp">false</span>
  <span class="k">elsif</span> <span class="n">toshi</span> <span class="o">==</span> <span class="mi">2027</span> <span class="k">then</span>
    <span class="k">return</span> <span class="kp">false</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>折角なのでもうすこし和風にしてみましょう。</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="err">うるう年かどうか</span><span class="p">(</span><span class="err">年</span><span class="p">)</span>
  <span class="k">if</span> <span class="err">年</span> <span class="o">==</span> <span class="mi">2022</span> <span class="k">then</span>
    <span class="k">return</span> <span class="kp">false</span>
  <span class="k">elsif</span> <span class="err">年</span> <span class="o">==</span> <span class="mi">2023</span> <span class="k">then</span>
    <span class="k">return</span> <span class="kp">false</span>
  <span class="k">elsif</span> <span class="err">年</span> <span class="o">==</span> <span class="mi">2024</span> <span class="k">then</span>
    <span class="k">return</span> <span class="kp">true</span>
  <span class="k">elsif</span> <span class="err">年</span> <span class="o">==</span> <span class="mi">2025</span> <span class="k">then</span>
    <span class="k">return</span> <span class="kp">false</span>
  <span class="k">elsif</span> <span class="err">年</span> <span class="o">==</span> <span class="mi">2026</span> <span class="k">then</span>
    <span class="k">return</span> <span class="kp">false</span>
  <span class="k">elsif</span> <span class="err">年</span> <span class="o">==</span> <span class="mi">2027</span> <span class="k">then</span>
    <span class="k">return</span> <span class="kp">false</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>変数名や関数名をつける時のポイント</p>

<ul>
  <li>その名前を見ただけで、何を表す変数、関数なのかすぐに理解できるようにする</li>
  <li>基本的に英語でつける
<a href="https://codic.jp/engine">このサイト</a>とか便利</li>
  <li>汎用的な言葉を避けて分かりやすく</li>
</ul>

<p>既存のライブラリなどを参考にすると良いかも。</p>

<p>あとは、命名規則を統一すると良いです。</p>

<ul>
  <li>camelCase (単語の先頭を大文字)</li>
  <li>snake_case (単語の間をアンダーバー)</li>
  <li>kebab-case (単語の間をハイフン)</li>
</ul>

<p>例えば、今回の場合だと</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Rubyの場合true/falseを返す関数は?、破壊的な関数は!をつける慣習</span>
<span class="k">def</span> <span class="nf">isLeapYear?</span>
  <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">4</span> <span class="o">!=</span> <span class="mi">0</span>
    <span class="nb">puts</span> <span class="kp">false</span>
  <span class="k">elsif</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">100</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">400</span> <span class="o">!=</span><span class="mi">0</span>
    <span class="nb">puts</span> <span class="kp">true</span>
  <span class="k">else</span>
    <span class="nb">puts</span> <span class="kp">true</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>のように実装できます。</p>

<p>うるう年問題はあるますが、2027までなら大丈夫。</p>

<h2 id="関数">関数</h2>

<p>関数はなるべく機能ごとに簡単に実装します。</p>

<p>もし、長くなりそうな場合や使い回すことができそうな場合は関数にします。</p>

<h2 id="コメントアウト">コメントアウト</h2>

<p>コードを書くときに適切にコメントアウトを残しておくと、他の人が読んだときや自分が読んだときに役に立ちます。</p>

<p>コードを読んでみると面白い。</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># これは魔法。触っちゃダメ。</span>
<span class="c1"># 誰もコメントを読んでくれない！</span>
<span class="c1"># THANK YOU MARIO! BUT OUR PRINCESS IS IN ANOTHER CASTLE!</span>
<span class="c1"># TODO: もう全部消す</span>
<span class="c1"># これ書いた奴バカじゃねーの…全然動かねーよ！</span>
</code></pre></div></div>

<p>なんでもかんでもコメントするよりは、考えたロジックなどパット見ではわからないことを書く。場合にもよるが。</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">getPrimeList</span><span class="p">(</span><span class="n">max</span><span class="p">)</span>
  <span class="n">list</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="o">..</span><span class="n">max</span><span class="p">).</span><span class="nf">to_a</span> <span class="c1">#2からmaxまでの配列(なくても良いかも)</span>
  <span class="n">prime_list</span> <span class="o">=</span> <span class="p">[]</span>
  <span class="n">sqrt</span> <span class="o">=</span> <span class="no">Math</span><span class="p">.</span><span class="nf">sqrt</span><span class="p">(</span><span class="n">max</span><span class="p">).</span><span class="nf">floor</span>
  <span class="c1"># 倍数を消す(エラトステネスの篩)</span>
  <span class="k">while</span> <span class="n">val</span> <span class="o">=</span> <span class="n">list</span><span class="p">.</span><span class="nf">shift</span>
    <span class="n">prime_list</span> <span class="o">&lt;&lt;</span> <span class="n">val</span>
    <span class="k">if</span> <span class="n">val</span> <span class="o">&gt;</span> <span class="n">sqrt</span>
      <span class="k">break</span>
    <span class="k">end</span>
    <span class="n">list</span><span class="p">.</span><span class="nf">delete_if</span><span class="p">{</span><span class="o">|</span><span class="n">num</span><span class="o">|</span> <span class="n">num</span> <span class="o">%</span> <span class="n">val</span> <span class="o">==</span> <span class="mi">0</span><span class="p">}</span>
  <span class="k">end</span>
  <span class="k">return</span> <span class="n">prime_list</span><span class="p">.</span><span class="nf">concat</span><span class="p">(</span><span class="n">list</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div>

<h1 id="演習">演習</h1>

<p>今回の扱った内容は少し難しいため演習問題は基本的にこれまでの内容の応用です</p>

<h2 id="演習問題4a">演習問題4a</h2>

<p>2Dゲーム開発者のあなたは円と任意の壁との当たり判定を実装したいと思っています。</p>

<p>ここで壁は直線であり\(ax+by+c=0\)で与えられます。また、円の中心座標\((x_0, y_0)\)であり半径は\(r\)で与えられます。</p>

<p>このとき、円と壁が接触しているか判定する関数<code class="language-plaintext highlighter-rouge">isTouched(a,b,c,x0,y0,r)</code>を作成せよ。</p>

<p>ただし、壁抜けを防止するために接触の判定には<code class="language-plaintext highlighter-rouge">1.0</code>の幅をもたせる。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>制約
すべての値は整数として与えられる
</code></pre></div></div>

\[\begin{align}
直線:&amp;  ax+by+c=0\\
円:&amp;  (x-x_0)^2+(y-y_0)^2=r^2
\end{align}\]

<p>のグラフを<a href="https://www.geogebra.org/">GeoGebra</a>などで描画して試すと良いかも</p>

<p>入出力例</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>isTouched(49,27,40,55,59,77) =&gt; true
</code></pre></div></div>
<h2 id="演習問題4b">演習問題4b</h2>

<p>これまでやってきた内容は基本的な文法などです。プログラミングで重要なのは、アルゴリズムを考えそれを実装する力でもあったりします。
アルゴリズムの勉強としてよくあるのが数を並べ替えるソートです。
整数が配列として与えられたときに、それらを小さい順に並べ替えて出力する関数<code class="language-plaintext highlighter-rouge">sort(data)</code>を作成する。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>制約
データはすべて整数
配列の要素数Nは5以上20以下
</code></pre></div></div>

<p>入出力例</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sort([1, 3, 4, 5, 2]) =&gt; [1, 2, 3, 4, 5]
</code></pre></div></div>

<p>ヒント</p>

<p>色々なアルゴリズムがあるが、<code class="language-plaintext highlighter-rouge">バブルソート</code>と呼ばれるアルゴリズムを紹介する。</p>

<ul>
  <li>隣接する要素と比較し順序が逆であれば入れ替える</li>
  <li>すべてがソートされるまで繰り返す</li>
</ul>

<p>配列<code class="language-plaintext highlighter-rouge">data</code>で<code class="language-plaintext highlighter-rouge">i</code>番目と<code class="language-plaintext highlighter-rouge">i+1</code>番目の要素を入れ替える場合は,</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</code></pre></div></div>
<p>のように書けます。</p>

<h2 id="演習問題4c">演習問題4c</h2>

<p>AさんとBさんがじゃんけんをした結果が配列として与えられる。</p>

<p>このとき、AさんとBさんの勝敗を出力する関数<code class="language-plaintext highlighter-rouge">judge(arrA, arrB)</code>を作成する。</p>

<p>出力は、Aさんが買った場合には<code class="language-plaintext highlighter-rouge">"A"</code>、Bさんが買った場合には<code class="language-plaintext highlighter-rouge">"A"</code>、引き分けの場合は<code class="language-plaintext highlighter-rouge">"DRAW"</code>を出力する。</p>

<p>なお、じゃんけんの結果は0がグー、1がチョキ、2がパーとして与えられる。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>制約
じゃんけんの回数は1以上20以下である。
</code></pre></div></div>

<p>入出力例</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>judge([1,1,0],[2,2,2]) =&gt; "A"
</code></pre></div></div>

<p>ヒント じゃんけんの関係に注目すると賢く判定できます</p>

<h2 id="以下上級者向け問題">以下上級者向け問題</h2>
<h2 id="演習問題4d">演習問題4d</h2>

<p>コンピューターを用いて数値シミュレーションをすることはコンピューターの活用としてよくあります。</p>

<p>では、コンピューターを用いて定積分を解いてみましょう。</p>

\[\int_a^b f(x)   dx\]

<p>が与えられたときにその近似解を求める関数を作成せよ。</p>

<p>ただし、関数<code class="language-plaintext highlighter-rouge">f(x)</code>は文字列<code class="language-plaintext highlighter-rouge">"x**2+x"</code>のように与えられ</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="nb">eval</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="mf">2.0</span>
</code></pre></div></div>

<p>として、eval関数を用いて<code class="language-plaintext highlighter-rouge">f(x)</code>の結果を取得できる。</p>

<p>ヒント</p>

<p>定積分をシュミレートする方法には、色々ありますがここではシンプルな台形公式を用いた方法を紹介します。</p>

<p>積分区間を分割してあげて、足し合わせることによって求める方法を数値積分といいます。</p>

<p>ここで、積分区間を\(n\)個に分割してあげて、その微小な幅を\(h=(b-a)/n\)とします。</p>

<p>このとき、図のように少区間ごとに台形で分割してあげます。</p>

<p><img src="/lect4/fig/daikei.png" alt="daikei" /></p>

<p>すると、1つの台形の面積\(\Delta A(x_i)\)は、</p>

\[\Delta A(x_i) = \frac{h}{2} \{ f(a+i\cdot h)+f(a+(i+1)\cdot h) \}\]

<p>として表されます。</p>

<p>これを利用すると、</p>

\[\begin{align*}
\int_a^b f(x) dx &amp;\simeq \sum_{i=1}^n \Delta A(x_i)\\
&amp;= \sum_{i=1}^n \frac{h}{2} \{ f(a+i\cdot h)+f(a+(i+1)\cdot h) \}
\end{align*}\]

<p>として近似できます。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>制約
a,bは実数
f(x)は区間内においてすべて正
小数点以下2桁までの精度で判定
</code></pre></div></div>

<pre><code class="language-入出力例">getArea(0,1,"Math.sqrt(x**2+1)") =&gt; 1.14
</code></pre>

<h2 id="演習問題4e">演習問題4e</h2>

<p>4aの問題はいろいろなアルゴリズムがあります。</p>

<p>その中でも、1で示したバブルソートは少し遅いアルゴリズムですので、そのアルゴリズムを高速化して大量のデータを合計500ms以下でソートできるように改良してください。</p>

<p>キーワード</p>
<ul>
  <li>クイックソート</li>
  <li>ヒープソート</li>
  <li>ボゴソート</li>
  <li>バイナリソート</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>制約
データはすべて整数
配列の要素数Nは1000以上200以下
</code></pre></div></div>
<h2 id="演習問題4fジャッジはなし">演習問題4f(ジャッジはなし)</h2>

<p>Rubyの型はすべてClassにより実装されています。そのため、新しく型を追加したり上書きすることが可能です。</p>

<p>例えば、Classを使うと</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">String</span>
  <span class="k">def</span> <span class="err">だ！</span>
    <span class="nb">self</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">C</span><span class="err">名前</span> <span class="o">&lt;</span> <span class="no">String</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="err">名前</span><span class="p">)</span>
    <span class="nb">self</span><span class="p">.</span><span class="nf">replace</span> <span class="err">名前</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">self</span><span class="o">.</span><span class="err">命名</span><span class="p">(</span><span class="err">名前</span><span class="p">)</span>
    <span class="nb">self</span><span class="p">.</span><span class="nf">new</span> <span class="err">名前</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="err">は</span><span class="p">(</span><span class="err">値</span><span class="p">)</span>
    <span class="nb">self</span><span class="p">.</span><span class="nf">replace</span> <span class="err">値</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="err">の名前</span>
    <span class="k">return</span> <span class="nb">self</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="err">逆にする</span>
    <span class="k">return</span> <span class="nb">self</span><span class="p">.</span><span class="nf">reverse</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="err">の名前を教えて</span>
    <span class="nb">puts</span> <span class="nb">self</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>のようにすると、</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>私 = C名前.命名("平地")
私.の名前を教えて
私.は 私.の名前.逆にする
私.の名前を教えて
私.は "山田".だ！
私.の名前を教えて
</code></pre></div></div>

<p>のように日本語っぽい謎のプログラムを書くこともできます。</p>

<p>ここで、実際に新しい型を定義して複素数の演算をする<code class="language-plaintext highlighter-rouge">Class</code>を作成せよ。</p>

<p>テンプレートとして以下を示す。</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Comp</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
    <span class="c1"># 複素数 a+bi</span>
    <span class="vi">@a</span> <span class="o">=</span> <span class="n">a</span><span class="p">;</span> <span class="vi">@b</span> <span class="o">=</span> <span class="n">b</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">getReal</span>
    <span class="vi">@a</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">getImagine</span>
    <span class="vi">@b</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">to_s</span>
    <span class="n">str</span> <span class="o">=</span> <span class="s2">""</span>
    <span class="k">if</span> <span class="vi">@a</span> <span class="o">!=</span> <span class="mi">0</span> <span class="k">then</span> <span class="n">str</span> <span class="o">+=</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@a</span><span class="si">}</span><span class="s2">"</span> <span class="k">end</span>
    <span class="k">if</span> <span class="vi">@a</span> <span class="o">!=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="vi">@b</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">then</span> <span class="n">str</span> <span class="o">+=</span> <span class="s2">"+"</span> <span class="k">end</span>
    <span class="k">if</span> <span class="vi">@b</span> <span class="o">!=</span> <span class="mi">0</span> <span class="k">then</span> <span class="n">str</span> <span class="o">+=</span> <span class="s2">"</span><span class="si">#{</span><span class="vi">@b</span><span class="si">}</span><span class="s2">i"</span> <span class="k">end</span>
    <span class="n">str</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">abs</span>
    <span class="c1"># 複素数の大きさを返す</span>
    <span class="c1"># ここに実装</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">conj</span>
    <span class="c1"># 共役複素数を返す</span>
    <span class="c1"># ここに実装</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">+</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="c1"># 複素数の和を返す</span>
    <span class="c1"># ここに実装</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">-</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="c1"># 複素数の差を返す</span>
    <span class="c1"># ここに実装</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">*</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="c1"># 複素数の席を返す</span>
    <span class="c1"># ここに実装</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">**</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="c1"># 複素数の累乗を返す</span>
    <span class="c1"># ここに実装</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">/</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="c1"># 複素数の割り算を返す</span>
    <span class="k">if</span> <span class="n">x</span><span class="p">.</span><span class="nf">getImagine</span> <span class="o">!=</span> <span class="mi">0</span>
      <span class="c1"># 分母に虚数があるなら実数化する</span>
      <span class="c1"># ここに実装</span>
    <span class="k">end</span>
    <span class="c1"># ここに実装</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>正しく実装できると、</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="no">Comp</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="c1"># i</span>
<span class="n">b</span> <span class="o">=</span> <span class="no">Comp</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="c1"># 1+i</span>
<span class="nb">puts</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">=&gt;</span> <span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span><span class="n">i</span>
<span class="nb">puts</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span> <span class="o">=&gt;</span> <span class="o">-</span><span class="mi">1</span>
<span class="nb">puts</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span> <span class="o">=&gt;</span> <span class="o">-</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">1</span><span class="n">i</span>
<span class="nb">puts</span> <span class="n">a</span> <span class="o">/</span> <span class="n">b</span> <span class="o">=&gt;</span> <span class="mf">0.5</span> <span class="o">+</span> <span class="mf">0.5</span><span class="n">i</span>
</code></pre></div></div>
<p>のようにして正しく計算をすることができる。</p>

<p>なお、<code class="language-plaintext highlighter-rouge">@a</code>などの変数はクラスの中で使用するクラス変数です。</p>

    <footer class="site-footer">
      
      <span class="site-footer-owner"><a href="https://github.com/csenet/learn-ruby">learn-ruby</a>
        is maintained by <a href="https://github.com/csenet">csenet</a>.</span>
      
      <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub
          Pages</a>.</span>
    </footer>
  </main>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous">
  </script>
</body>

</html>